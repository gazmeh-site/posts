## Apache Jmeter چیست؟
Apache Jmeter یا به فارسی همان جی‌میتر، یک نرم افزار open source برای انجام تست‌های load، stress، performance و … برای انواع نرم‌افزاها و برنامه‌هایی مانند اپلیکشن‌های وب، برنامه‌های مبتنی بر http/https، سرورهای پایگاه داده و غیره است. همچنین می‌توان از آن برای خودکارسازی انواع تست‌های کارکردی نیز استفاده کرد. برای آشنایی با جی‌میتر و مزایا و معایب آن می‌توانید به [آشنایی با جی‌میتر و بررسی نقاط ضعف و قوت آن](https://gazmeh.ir/posts/what-is-jmeter-and-review-its-strengths-and-weaknesses) مراجعه کنید. در ادامه این آموزش، نحوه پیکربندی این ابزار بررسی می‌شود. 

## نصب پیش‌نیازها
چون جی‌میتر یک نرم افزار دسکتاپ جاوایی است، نیاز است که ابتدا `JDK` را نصب کنیم. همانطور که در سایت Apache Jmeter اشاره شده است باید JDK ورژن 8 و یا بالاتر را نصب کنید.

> توجه کنید که در JDK نسخه 17 به صورت پیش‌فرض تنظیمات مربوط به Environment Variable به هنگام نصب انجام می‌گیرد.

پس از نصب JDK، نیاز است که مسیر نصب جاوا را به سیستم عامل معرفی کنیم:
1. روی This PC کلیک راست کرده و Properties را انتخاب کنید:

![Properties](./resources/properties.png?raw=true "Properties")

2. سپس وارد Control Panel / System and Security / System / Advanced System Settings شوید تا دیالوگی مانند شکل زیر نمایش داده شود، سپس  تب Advanced را انتخاب کرده و روی Environment Variables … کلیک کنید:

![Environment Variables](./resources/environment-variables.png?raw=true "Environment Variables")

3. سپس طبق شکل زیر روی گزینه New کلیک کرده و مسیر نصب JDK را در قسمت Variable Value وارد کنید:


![New Variable](./resources/new-variable.png?raw=true "New Variable")

4. پس از وارد کردن Variable Value، باید مسیر bin را در متغیر سیستمی Path قرار دهیم. بنابراین روی Path و سپس روی Edit کلیک کنید:

![Path](./resources/path.png?raw=true "Path")

5. مسیر فایل bin را به لیست اضافه کنید و OK را کلیک کنید:

![New Path](./resources/new-path.png?raw=true "New Path")

پس از پایان نصب JDK، برای بررسی نصب موفقیت‌آمیز آن، می توانید به CMD رفته و کامند `java -version` را وارد کنید. اگر جاوا با موفقیت نصب شده باشد با خروجی مثل شکل زیر مواجه خواهید شد:

![Java Version](./resources/java-version.png?raw=true "Java Version")

> اگر به درستی نصب نشده باشد با پیغام "java command not found" مواجه خواهید شد و مجددا باید همین مراحل را طی کنید.

## نصب جی‌میتر
برای دانلود آخرین نسخه جی‌میتر به سایت [آپاچی جی‌میتر](https://jmeter.apache.org/download_jmeter.cgi) مراجعه کرده و از قسمت `Binaries` یکی از فایل های *.zip و یا *.tgz را دانلود کنید.

![Binaries](./resources/binaries.png?raw=true "Binaries")

برخلاف سایر نرم افزارها نیازی به طی کردن فرایند طولانی برای نصب نیست. کافی است فایل دانلود شده را در مسیری که میخواهید، از حالت فشرده خارج کنید. فایل های جی‌میتر شامل موارد زیر می‌باشند:
> * **/bin:** شامل فایل اسکریپت برای شروع جی‌میتر
> * **/docs:** شامل فایل‌ها و اسناد جی‌میتر
> * **/extras:** فایل‌های اضافی مربوط به ant
> * **/lib:** شامل کتابخانه‌های جاوا مورد نیاز جی‌میتر
> * **/lib/ext:** شامل فایل‌های jar اصلی برای جی‌میتر و پروتکل‌ها
> * **/lib/junit:** کتابخانه JUnit مورد استفاده برای جی‌میتر

## روش‌های راه‌اندازی و اجرا
جی‌میتر را می‌توان در حالت‌های مختلف اجرا کرد:
> * GUI Mode 
> * حالت سرور (Server Mode)
> * حالت خط فرمان (Command Line Mode)

### اجرای جی‌میتر در حالت GUI Mode
در ویندوز فقط کافی است فایل bin/jmeter.bat و در لینوکس/یونیکس/مک فایل bin/jmeter.sh را اجرا کنید:

![Bin](./resources/bin.png?raw=true "Bin")

پس از اجرا فایل ذکر شده می‌توانید بخش‌های مختلف جی‌میتر را ببینید و از آن برای انواع تست‌ها استفاده کنید. برای آموزش انواع تست در جی‌میتر می‌توانید به سایر آموزش‌های این سایت مراجعه کنید.

![Test Plan](./resources/test-plan.png?raw=true "Test Plan")

### اجرای جی‌میتر در حالت Non-GUI
**در حالت Server Mode**

حالت سرور برای تست distributed استفاده می‌شود. این تست به عنوان یک مدل client-server عمل می‌کند. در این مدل، جی‌میتر روی کامپیوتر سرور در حالت سرور و روی کامپیوتر client در حالت GUI اجرا می شود. برای اجرا در حالت سرور، کافی است فایل bin\jmeter-server.bat را اجرا کنید.

**در حالت خط فرمان (Command Line Mode)**

جی‌میتر در حالت GUI حافظه بیشتری را مصرف می‌کند. بنابراین برای صرفه‌جویی در منابع، می‌توانید از این حالت استفاده کنید. برای این کار از دستور زیر استفاده کنید:
```
jmeter -n  -t testPlan.jmx  -l log.jtl  -H proxy-Server  -P 8000
       (1)            (2)            (3)              (4)
```
> 1. مشخص می‌کند که جی‌میتر در حالت خط فرمان اجرا می‌شود.
> 2. اسم فایلی که حاوی Test Plan است.
> 3. لاگ فایل مربوط به تست که نتایج تست را ذخیره می‌کند.
> 4. اسم و شماره پورت سرور پروکسی میزبان
